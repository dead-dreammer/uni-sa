<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>University Registration Test</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 flex items-center justify-center min-h-screen p-4">
  <div class="bg-white shadow-xl rounded-xl p-6 w-full max-w-md">
    <h1 class="text-2xl font-bold text-center mb-4">University Auth Test</h1>

    <div class="space-y-6">
      <!-- Register Form -->
      <form id="registerForm" class="space-y-3 border p-3 rounded-lg">
        <h2 class="text-lg font-semibold">Register</h2>
        <input id="first_name" placeholder="First name" class="w-full border rounded p-2" required>
        <input id="last_name" placeholder="Last name" class="w-full border rounded p-2" required>
        <input id="reg_email" type="email" placeholder="Email" class="w-full border rounded p-2" required>
        <input id="reg_password" type="password" placeholder="Password" class="w-full border rounded p-2" required>
        <button type="submit" class="w-full bg-indigo-600 text-white p-2 rounded">Register</button>
      </form>

      <!-- Login Form -->
      <form id="loginForm" class="space-y-3 border p-3 rounded-lg">
        <h2 class="text-lg font-semibold">Login</h2>
        <input id="login_email" type="email" placeholder="Email" class="w-full border rounded p-2" required>
        <input id="login_password" type="password" placeholder="Password" class="w-full border rounded p-2" required>
        <button type="submit" class="w-full bg-green-600 text-white p-2 rounded">Login</button>
      </form>

      <pre id="output" class="bg-gray-100 p-3 rounded text-sm overflow-auto h-32"></pre>
    </div>
  </div>

  <script>
    const api = "http://127.0.0.1:5000"; // backend URL
    const output = document.getElementById("output");

    const log = (msg, data) => {
      output.textContent = msg + "\n" + JSON.stringify(data, null, 2);
    };

    // Register
    document.getElementById("registerForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const body = {
        first_name: document.getElementById("first_name").value,
        last_name: document.getElementById("last_name").value,
        email: document.getElementById("reg_email").value,
        password: document.getElementById("reg_password").value,
      };
      try {
        const res = await fetch(`${api}/register`, {
          method: "POST",
          headers: {"Content-Type": "application/json"},
          body: JSON.stringify(body)
        });
        const data = await res.json();
        log("Register response (" + res.status + "):", data);
      } catch (err) {
        log("Register error:", err);
      }
    });

    // Login
    document.getElementById("loginForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const body = {
        email: document.getElementById("login_email").value,
        password: document.getElementById("login_password").value,
      };
      try {
        const res = await fetch(`${api}/login`, {
          method: "POST",
          headers: {"Content-Type": "application/json"},
          body: JSON.stringify(body)
        });
        const data = await res.json();
        log("Login response (" + res.status + "):", data);
      } catch (err) {
        log("Login error:", err);
      }
    });
  </script>
</body>
</html>
